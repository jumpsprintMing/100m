<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<title>100 m æˆç¸¾é æ¸¬å™¨</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<!-- è®€ CSV -->
<script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
<!-- Chart.js -->
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
<style>
body{font-family:"Microsoft JhengHei",Arial,Helvetica,sans-serif;margin:1.2rem;line-height:1.65}
h2{margin-top:0}
fieldset{margin:0 0 1rem;padding:.8rem;border:1px solid #ccc}
input{width:90px;padding:4px}
label{margin-right:.6rem}
button{padding:.4rem 1rem}
#result{margin-top:1rem;font-size:1.1rem}
#chartBox{            /* åœ–è¡¨å¤–æ¡† */
  position:relative;
  max-width:900px;    /* ä½ å¯æ”¹æ›´å¯¬ */
  width:100%;
  height:0;
  padding-bottom:56.25%;  /* 16:9 â†’ 9/16 = 0.5625 = 56.25% */
}
/* è®“ <canvas> å¡«æ»¿å®¹å™¨ */
#chartBox canvas{
  position:absolute;
  top:0; left:0;
  width:100%; height:100%;
}
</style>
footer{margin-top:1.5rem;color:#666}
.intro{background:#f6f8fa;padding:1rem;border-left:4px solid #2c7be5;margin-bottom:1.2rem}
</style>
</head>
<body>

<h2>100 m æˆç¸¾é æ¸¬å™¨</h2>

<div class="intro">
<p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯ç†±æ„›ç”°å¾‘çš„<strong>æ™ºæ˜</strong>ï¼<br>
é€™å€‹ç¶²é æ˜¯ä¸€å€‹å°å°çš„æˆç¸¾é æ¸¬å™¨ï¼Œæ˜¯æˆ‘æ ¹æ“šè‡ªå·±çš„ç ”ç©¶å’Œçµ±è¨ˆè³‡æ–™æ‰€è¨­è¨ˆçš„ï¼Œå°ˆé–€é‡å°è‡ºç£æœ¬åœŸé¸æ‰‹æ‰“é€ çš„ 100 å…¬å°ºé æ¸¬æ¨¡å‹ã€‚é€éçµ±è¨ˆåˆ†æï¼Œå…·æœ‰ä¸€å®šçš„ç²¾æº–åº¦ã€‚<br>
åªè¦è¼¸å…¥è‡ªå·±åœ¨ <strong>30 m å…§ä¸‰å€‹é€šéè·é›¢</strong>ï¼ˆ10 mã€21.5 mã€30 mï¼‰æ‰€èŠ±çš„<strong>ç¸½æ™‚é–“</strong>ï¼Œç¶²ç«™å°±æœƒè‡ªå‹•å¹«ä½ é æ¸¬å®Œæ•´çš„ 100 m æˆç¸¾ï¼Œä¸¦ç”¨<strong>é»ƒè‰²</strong>æ¨™å‡ºä½ çš„é€Ÿåº¦æ›²ç·šã€‚<br>
ä¸‹æ–¹åœ–è¡¨æ˜¯æˆ‘æ•´ç†çš„ <strong>114 å¹´å…¨ä¸­é‹</strong> 100 m æº–æ±ºè³½èˆ‡æ±ºè³½é¸æ‰‹é€Ÿåº¦è®ŠåŒ–åœ–ï¼Œ<span style="color:#007bff">è—è‰²ä»£è¡¨ç”·ç”Ÿ</span>ã€<span style="color:#dc3545">ç´…è‰²ä»£è¡¨å¥³ç”Ÿ</span>ã€‚æ­¡è¿æ¯”è¼ƒçœ‹çœ‹å“ªä¸€æ®µé‚„æœ‰é€²æ­¥ç©ºé–“ï¼<br>
ç¥å¤§å®¶è¨“ç·´é †åˆ©ï¼å¦‚æœ‰èˆˆè¶£äº¤æµï¼Œæ­¡è¿å¯«ä¿¡çµ¦æˆ‘ ğŸ“§ eric8411111500@gmail.com
</p>
</div>

<form id="predictForm">
  <fieldset>
    <legend>é€šéè¼¸å…¥è·é›¢æ‰€ç”¨ç¸½æ™‚é–“ï¼ˆç§’ï¼‰</legend>
    <label>10 m <input type="number" step="0.001" id="t10" required></label>
    <label>21.5 m <input type="number" step="0.001" id="t215" required></label>
    <label>30 m <input type="number" step="0.001" id="t30" required></label>
  </fieldset>

  <fieldset>
    <legend>æ€§åˆ¥</legend>
    <label><input type="radio" name="gender" value="1" required> ç”·</label>
    <label><input type="radio" name="gender" value="0"> å¥³</label>
  </fieldset>

  <button type="button" onclick="calc()">è¨ˆç®—</button>
</form>

<div id="result"></div>

<div id="chartBox">
  <canvas id="speedChart"></canvas>
</div>

<footer>ä½œè€…ï¼šåœ‹ç«‹æˆåŠŸå¤§å­¸_è”¡æ™ºæ˜</footer>

<script>
/* ---------- å…¨åŸŸè®Šæ•¸ ---------- */
let chart;

/* ---------- è®€å– CSV ä¸¦ç•«èƒŒæ™¯æ›²ç·š ---------- */
Papa.parse('åˆ†æç”¨_æˆç¸¾.csv',{
  download:true,
  header:true,
  complete: res=>{
    const bgSets = res.data
      .filter(r=>r['10å…¬å°ºé€Ÿç‡'])            // é¿å…ç©ºè¡Œ
      .map(r=>{
        const col = r['æ€§åˆ¥']==='ç”·' ? 'rgba(0,123,255,.35)' : 'rgba(220,53,69,.35)';
        return {
          data:[
            {x:0,   y:+r['0å…¬å°ºé€Ÿç‡']},
            {x:10,  y:+r['10å…¬å°ºé€Ÿç‡']},
            {x:21.5,y:+r['21.5å…¬å°ºé€Ÿç‡']},
            {x:30,  y:+r['30å…¬å°ºé€Ÿç‡']}
          ],
          borderColor:col,
          borderWidth:1,
          showLine:true,
          pointRadius:0,
          tension:0
        };
      });
    initChart(bgSets);
  }
});

/* ---------- åˆå§‹åŒ– Chart ---------- */
function initChart(bgDatasets){
  const ctx=document.getElementById('speedChart');
  chart = new Chart(ctx,{
    type:'scatter',
    data:{datasets:bgDatasets},
    options:{
      maintainAspectRatio:false,
      scales:{
        x:{title:{display:true,text:'Distance (m)'},min:0,max:30},
        y:{title:{display:true,text:'Speed (m/s)'},min:0,max:12}
      },
      plugins:{legend:{display:false}}
    }
  });
}

/* ---------- è¼¸å…¥å¾Œè¨ˆç®— & ç–ŠåŠ é»ƒè‰²å€‹äººç·š ---------- */
function calc(){
  const t10  = parseFloat(document.getElementById('t10').value);
  const t215 = parseFloat(document.getElementById('t215').value);
  const t30  = parseFloat(document.getElementById('t30').value);
  const gEl  = document.querySelector('input[name="gender"]:checked');
  if(!(t10>0 && t215>t10 && t30>t215)){alert('æ™‚é–“éœ€éå¢ä¸”å¤§æ–¼ 0');return;}
  if(!gEl){alert('è«‹é¸æ“‡æ€§åˆ¥');return;}
  const sex  = +gEl.value;

  const v10   = 10   / t10;
  const v215  = 11.5 / (t215 - t10);
  const v30   = 8.5  / (t30 - t215);

  const pred = 23.852 -0.801*v10 -0.435*v215 -0.47*v30 -0.248*sex;

  document.getElementById('result').innerHTML =
    `V10 = ${v10.toFixed(3)} m/s&nbsp;&nbsp;
     V21.5 = ${v215.toFixed(3)} m/s&nbsp;&nbsp;
     V30 = ${v30.toFixed(3)} m/s<br>
     <strong>é æ¸¬ 100 m æˆç¸¾ï¼š${pred.toFixed(2)} ç§’</strong>`;

  /* ç§»é™¤èˆŠ user ç·šå†åŠ æ–°ç·š */
  chart.data.datasets = chart.data.datasets.filter(ds=>ds.label!=='user');
  chart.data.datasets.push({
    label:'user',
    order: 99, 
    data:[
      {x:0,   y:0},
      {x:10,  y:v10},
      {x:21.5,y:v215},
      {x:30,  y:v30}
    ],
    borderColor:'##FFA500',
    backgroundColor:'##FFA500',
    borderWidth:2.5,
    showLine:true,
    pointRadius:7,
    tension:0
  });
  chart.update();
}
</script>
</body>
</html>
